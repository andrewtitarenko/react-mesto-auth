{"ast":null,"code":"class Auth {\n  constructor(_ref) {\n    let {\n      baseURL,\n      headers\n    } = _ref;\n    this.url = baseURL;\n    this._headers = headers;\n  }\n  _checkResponse(response) {\n    if (response.ok) {\n      return response.json();\n    }\n    return Promise.reject(`Ошибка: ${response.status}`);\n  }\n  setRegisterUser(data) {\n    return fetch(`${this.url}/signup`, {\n      method: \"POST\",\n      headers: this._headers,\n      body: JSON.stringify(data)\n    }).then(res => {\n      return this._checkResponse(res);\n    }).then(data => {\n      localStorage.setItem(\"token\", data.token);\n      return data;\n    });\n  }\n  setAuthorizeUser(data) {\n    return fetch(`${this.url}/signin`, {\n      method: \"POST\",\n      headers: this._headers,\n      body: JSON.stringify(data)\n    }).then(res => {\n      return this._checkResponse(res);\n    }).then(data => {\n      if (data.token) {\n        localStorage.setItem(\"token\", data.token);\n        return data;\n      } else {\n        return;\n      }\n    });\n  }\n  getAuthenticationUser(token) {\n    return fetch(`${this.url}/users/me`, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${token}`\n      }\n    }).then(res => {\n      return this._checkResponse(res);\n    });\n  }\n}\nconst auth = new Auth({\n  baseURL: process.env.REACT_APP_API_HTTP,\n  headers: {\n    \"Content-Type\": \"application/json\"\n  }\n});\nexport default auth;","map":{"version":3,"names":["Auth","constructor","baseURL","headers","url","_headers","_checkResponse","response","ok","json","Promise","reject","status","setRegisterUser","data","fetch","method","body","JSON","stringify","then","res","localStorage","setItem","token","setAuthorizeUser","getAuthenticationUser","Authorization","auth","process","env","REACT_APP_API_HTTP"],"sources":["/Users/andrewtitarenko/Desktop/12/react-mesto-auth/src/utils/Auth.js"],"sourcesContent":["class Auth {\n  constructor({ baseURL, headers }) {\n    this.url = baseURL;\n    this._headers = headers;\n  }\n\n  _checkResponse(response) {\n    if (response.ok) {\n      return response.json();\n    }\n    return Promise.reject(`Ошибка: ${response.status}`);\n  }\n\n  setRegisterUser(data) {\n    return fetch(`${this.url}/signup`, {\n      method: \"POST\",\n      headers: this._headers,\n      body: JSON.stringify(data),\n    })\n      .then((res) => {\n        return this._checkResponse(res);\n      })\n      .then((data) => {\n        localStorage.setItem(\"token\", data.token);\n        return data;\n      });\n  }\n\n  setAuthorizeUser(data) {\n    return fetch(`${this.url}/signin`, {\n      method: \"POST\",\n      headers: this._headers,\n      body: JSON.stringify(data),\n    })\n      .then((res) => {\n        return this._checkResponse(res);\n      })\n      .then((data) => {\n        if (data.token) {\n          localStorage.setItem(\"token\", data.token);\n          return data;\n        } else {\n          return;\n        }\n      });\n  }\n\n  getAuthenticationUser(token) {\n    return fetch(`${this.url}/users/me`, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${token}`,\n      },\n    })\n    .then((res) => {\n      return this._checkResponse(res);\n    });\n  }\n}\n\nconst auth = new Auth({\n  baseURL: process.env.REACT_APP_API_HTTP,\n  headers: {\n    \"Content-Type\": \"application/json\",\n  },\n});\n\nexport default auth;\n"],"mappings":"AAAA,MAAMA,IAAI,CAAC;EACTC,WAAW,OAAuB;IAAA,IAAtB;MAAEC,OAAO;MAAEC;IAAQ,CAAC;IAC9B,IAAI,CAACC,GAAG,GAAGF,OAAO;IAClB,IAAI,CAACG,QAAQ,GAAGF,OAAO;EACzB;EAEAG,cAAc,CAACC,QAAQ,EAAE;IACvB,IAAIA,QAAQ,CAACC,EAAE,EAAE;MACf,OAAOD,QAAQ,CAACE,IAAI,EAAE;IACxB;IACA,OAAOC,OAAO,CAACC,MAAM,CAAE,WAAUJ,QAAQ,CAACK,MAAO,EAAC,CAAC;EACrD;EAEAC,eAAe,CAACC,IAAI,EAAE;IACpB,OAAOC,KAAK,CAAE,GAAE,IAAI,CAACX,GAAI,SAAQ,EAAE;MACjCY,MAAM,EAAE,MAAM;MACdb,OAAO,EAAE,IAAI,CAACE,QAAQ;MACtBY,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACL,IAAI;IAC3B,CAAC,CAAC,CACCM,IAAI,CAAEC,GAAG,IAAK;MACb,OAAO,IAAI,CAACf,cAAc,CAACe,GAAG,CAAC;IACjC,CAAC,CAAC,CACDD,IAAI,CAAEN,IAAI,IAAK;MACdQ,YAAY,CAACC,OAAO,CAAC,OAAO,EAAET,IAAI,CAACU,KAAK,CAAC;MACzC,OAAOV,IAAI;IACb,CAAC,CAAC;EACN;EAEAW,gBAAgB,CAACX,IAAI,EAAE;IACrB,OAAOC,KAAK,CAAE,GAAE,IAAI,CAACX,GAAI,SAAQ,EAAE;MACjCY,MAAM,EAAE,MAAM;MACdb,OAAO,EAAE,IAAI,CAACE,QAAQ;MACtBY,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACL,IAAI;IAC3B,CAAC,CAAC,CACCM,IAAI,CAAEC,GAAG,IAAK;MACb,OAAO,IAAI,CAACf,cAAc,CAACe,GAAG,CAAC;IACjC,CAAC,CAAC,CACDD,IAAI,CAAEN,IAAI,IAAK;MACd,IAAIA,IAAI,CAACU,KAAK,EAAE;QACdF,YAAY,CAACC,OAAO,CAAC,OAAO,EAAET,IAAI,CAACU,KAAK,CAAC;QACzC,OAAOV,IAAI;MACb,CAAC,MAAM;QACL;MACF;IACF,CAAC,CAAC;EACN;EAEAY,qBAAqB,CAACF,KAAK,EAAE;IAC3B,OAAOT,KAAK,CAAE,GAAE,IAAI,CAACX,GAAI,WAAU,EAAE;MACnCY,MAAM,EAAE,KAAK;MACbb,OAAO,EAAE;QACP,cAAc,EAAE,kBAAkB;QAClCwB,aAAa,EAAG,UAASH,KAAM;MACjC;IACF,CAAC,CAAC,CACDJ,IAAI,CAAEC,GAAG,IAAK;MACb,OAAO,IAAI,CAACf,cAAc,CAACe,GAAG,CAAC;IACjC,CAAC,CAAC;EACJ;AACF;AAEA,MAAMO,IAAI,GAAG,IAAI5B,IAAI,CAAC;EACpBE,OAAO,EAAE2B,OAAO,CAACC,GAAG,CAACC,kBAAkB;EACvC5B,OAAO,EAAE;IACP,cAAc,EAAE;EAClB;AACF,CAAC,CAAC;AAEF,eAAeyB,IAAI"},"metadata":{},"sourceType":"module","externalDependencies":[]}